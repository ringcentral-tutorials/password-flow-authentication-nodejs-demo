<!DOCTYPE html><html><head><title>RingCentral Platform Authentication - Password Flow OAuth- RingCentral Developer Tutorials</title><style>body, html {
  height:100%;
  width:100%;
  padding:0;
  margin:0;
  overflow:hidden;
  background-color:#ddd;
}
.wrapper {
  height:100%;
  width:100%;
}</style><link rel="shortcut icon" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="apple-touch-icon" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="apple-touch-icon" sizes="72x72" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="apple-touch-icon" sizes="114x114" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/jquery-ui@1.12.1/themes/base/all.css"><link rel="stylesheet" href="viewsaurus.css"></head><body><div class="wrapper"><div class="dpw-header-container"><div class="dpw-header center-section"><div class="logo"><a href="https://developers.ringcentral.com" class="logo-link"></a></div><div class="nav-top-menus"></div><div class="dpw-login-section"><a href="https://developer.ringcentral.com/login.html#/">Sign in | Sign up</a></div></div></div><div id="viewsaurus" data-title="RingCentral Platform Authentication - Password Flow OAuth"><div class="saurus-panes"><div class="saurus-panes-header"><a href="https://ringcentral.github.io/tutorials/" class="saurus-back-to-tutorials">Tutorials</a><span>&gt;</span><span>RingCentral Platform Authentication - Password Flow OAuth</span></div><div class="saurus-prose"><div class="saurus-nav-buttons"><div class="saurus-nav-button nav-overview"><div class="saurus-nav-button-inner"><i class="fa fa-fw icon-menu"></i></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-previous"><div class="saurus-nav-button-inner"><a href=""> <i class="fa fa-fw fa-play fa-rotate-180"></i></a></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-next clickable"><div class="saurus-nav-button-inner"><a href="#1"> <i class="fa fa-fw fa-play"></i></a></div></div><div class="saurus-next-title"><span class="next-title-inner"></span></div></div><div class="saurus-progress-bar"></div><div class="saurus-start"><p>In this step-by-step tutorial, we are going to learn how to authenticate RingCentral platform using password flow in Node JS programming language. Click the &quot;Start&quot; button below to start the tutorial..</p><a href="#0">Start Tutorial</a></div><div class="saurus-content"><div data-title="RingCentral Platform Authentication - Password Flow OAuth" class="chapter"><div data-title="Clone and Setup the project" data-file="../README.md" data-highlight="10-18" class="step"><h3 id="clone-and-setup-the-project">Clone and Setup the project</h3>
<p>Clone the project from GitHub and install RingCentral Node JS SDK and dependencies.</p>
</div><div data-title="Create a RingCentral app" data-file="../README.md" data-highlight="24-27" class="step"><h3>Create a RingCentral app</h3><p>If you don't know how to create a RingCentral app. Click <a href="https://developer.ringcentral.com/library/getting-started.html">here</a> for instructions.</p></div><div data-title="Set Environment Variables" data-file="../environment/dotenv-sandbox" class="step"><h3 id="set-environment-variables">Set Environment Variables</h3>
<p>Copy the Client id and Client secret and add them to the <code>.env-sandbox</code> file.</p>
<pre><code>RC_CLIENT_ID=
RC_CLIENT_SECRET=
</code></pre><p>Add the account login credentials to the <code>.env-sandbox</code> file.</p>
<pre><code>RC_USERNAME=
RC_PASSWORD=
RC_EXTENSION=
</code></pre><p>If you want to specify variables for your production environment, repeat this step for the <code>.env-production</code> file.</p>
</div><div data-title="Programing options" data-file="../rc_authenticate.js" data-highlight="1-2" class="step"><h3 id="authenticate-using-ringcentral-node-js-sdk">Authenticate using RingCentral Node JS SDK</h3>
<p>Using a RingCentral SDK is the most convenient way to authenticate and access RingCentral platform services.</p>
<p>Let&#39;s start by creating a file named <code>rc_authenticate.js</code>.</p>
</div><div data-title="Load the environment variables" data-file="../rc_authenticate.js" data-highlight="4-12" class="step"><h3 id="load-the-environment-variables">Load the environment variables</h3>
<p>We read the ENVIRONMENT value from the <code>.env</code> file and load the <code>.env-sandbox</code> or <code>.env-production</code> accordingly.</p>
<h3 id="specify-a-txt-file-to-keep-the-authentication-data">Specify a .txt file to keep the authentication data</h3>
<p>For the sandbox environment, we save the data to the <code>tokens_sb.txt</code>.</p>
<p>For the production environment, we save the data to the <code>tokens_pd.txt</code>.</p>
<p>In your real application, you may want to secure the authentication data in a database or in a safe place as it contains the access token and the refresh token!</p>
</div><div data-title="Create a reusable class" data-file="../rc_authenticate.js" data-highlight="14-15" class="step"><h3 id="create-a-reusable-class">Create a reusable class</h3>
<p>To make this tutorial code reusable and extensible, we define the RC_Authentication class and implement a couple utility functions.</p>
<pre><code>get_sdk()
get_platform()
</code></pre></div><div data-title="Create an SDK instance" data-file="../rc_authenticate.js" data-highlight="18-25" class="step"><h3 id="create-an-sdk-instance">Create an SDK instance</h3>
<p>First we implement the <code>get_sdk()</code> function to instantiate the SDK and return the <code>sdk</code> instance.</p>
<p>To instantiate the <code>sdk</code>, we pass the client id, client secret and the platform environment parameters.</p>
</div><div data-title="Get the platform instance from the SDK" data-file="../rc_authenticate.js" data-highlight="27-28" class="step"><h3 id="get-the-platform-instance-from-the-sdk">Get the <code>platform</code> instance from the SDK</h3>
<p>Now we implement the <code>get_platform</code> function.</p>
<p>First we call the <code>get_sdk()</code> function to get the <code>sdk</code> instance.</p>
<p>Then we call the <code>sdk.platform()</code> to retrieve the <code>platform</code> instance.</p>
</div><div data-title="Authenticate with the login() function" data-file="../rc_authenticate.js" data-highlight="39-49" class="step"><h3 id="call-the-login-function">Call the <code>login()</code> function</h3>
<p>Now we authenticate a user by calling the <code>platform.login()</code> function, passing the username, extension_number and password.</p>
<p>Upon success, we will write the authentication data to a local file and return the <code>platform</code> instance to a caller function.</p>
</div><div data-title="Authenticate with the authentication data" data-file="../rc_authenticate.js" data-highlight="29-37" class="step"><h3 id="read-the-saved-authentication-data">Read the saved authentication data</h3>
<p>Every time we call the <code>get_platform()</code> function, we get the <code>platform</code> instance from the <code>sdk</code>, read the authentication data we saved locally and call the <code>platform.auth().setData(tokenObj)</code> function, passing along the authentication data.</p>
<p>Then we call the <code>platform.loggedIn()</code> function to check if we are still logged in or not. The SDK will automatically validate the access token&#39;s and the refresh token&#39;s expiration time and return true if the user is still authenticated. Otherwise, the function returns false and we proceed to the login procedure as discussed in the previous step.</p>
</div><div data-title="Use the RC_Authentication class" data-file="../demo.js" data-highlight="1-22" class="step"><h3 id="use-the-rc_authentication-class">Use the RC_Authentication class</h3>
<p>Now let&#39;s create a file <code>demo.js</code> and use the <code>RC_Authentication</code> class as shown in the demo code on the right-hand side.</p>
<p>In this demo, we call the account extension endpoint to read extensions&#39; information and print them out on the console.</p>
<h3 id="run-the-demo-app-">Run the demo app.</h3>
<pre><code>$ node demo.js
</code></pre></div></div>
<div class="saurus-files" style="display:none;"><textarea class="saurus-file" data-file="../README.md" data-mode="markdown">IyMjIE92ZXJ2aWV3CkltcGxlbWVudCBSaW5nQ2VudHJhbCBwbGF0Zm9ybSBhdXRoZW50aWNhdGlvbiB1c2luZyBQYXNzd29yZCBGbG93LgoKIyMjIFJpbmdDZW50cmFsIFBsYXRmb3JtClJpbmdDZW50cmFsIFBsYXRmb3JtIGlzIGEgcmljaCBSRVNUZnVsIEFQSSBwbGF0Zm9ybSB3aXRoIG1vcmUgdGhhbiA2MCBBUElzIGZvciBidXNpbmVzcyBjb21tdW5pY2F0aW9uIGluY2x1ZGVzIGFkdmFuY2VkIHZvaWNlIGNhbGxzLCBjaGF0IG1lc3NhZ2luZywgU01TL01NUyBhbmQgRmF4LgoKCiMjIyBDbG9uZSBhbmQgU2V0dXAgdGhlIHByb2plY3QKYGBgCiQgZ2l0IGNsb25lIGh0dHBzOi8vZ2l0aHViLmNvbS9yaW5nY2VudHJhbC10dXRvcmlhbHMvcGFzc3dvcmQtZmxvdy1hdXRoZW50aWNhdGlvbi1ub2RlanMtZGVtbwoKJCBjZCBwYXNzd29yZC1mbG93LWF1dGhlbnRpY2F0aW9uLW5vZGVqcy1kZW1vCgokIG5wbSBpbnN0YWxsIC0tc2F2ZQoKJCBjcCBlbnZpcm9ubWVudC9kb3RlbnYtc2FuZGJveCBlbnZpcm9ubWVudC8uZW52LXNhbmRib3gKCiQgY3AgZW52aXJvbm1lbnQvZG90ZW52LXByb2R1Y3Rpb24gZW52aXJvbm1lbnQvLmVudi1wcm9kdWN0aW9uCgpgYGAKCiMjIyBDcmVhdGUgYW4gYXBwCgoqIENyZWF0ZSBhbiBhcHBsaWNhdGlvbiBhdCBbUmluZ0NlbnRyYWwgRGV2ZWxvcGVyIFBvcnRhbF0oaHR0cHM6Ly9kZXZlbG9wZXIucmluZ2NlbnRyYWwuY29tKS4KKiBTZWxlY3QgYFNlcnZlci1vbmx5IChObyBVSSlgIGZvciB0aGUgUGxhdGZvcm0gdHlwZS4KKiBBZGQgdGhlIGBSZWFkQWNjb3VudHNgIHBlcm1pc3Npb24gZm9yIHRoZSBhcHAuCiogQ29weSB0aGUgQ2xpZW50IGlkIGFuZCBDbGllbnQgc2VjcmV0IGFuZCBhZGQgdGhlbSB0byB0aGUgYC5lbnYtW2Vudmlyb25tZW50XWAgZmlsZS4KYGBgClJDX0NMSUVOVF9JRD0KUkNfQ0xJRU5UX1NFQ1JFVD0KYGBgCiogQWRkIHRoZSBhY2NvdW50IGxvZ2luIGNyZWRlbnRpYWxzIHRvIHRoZSBgLmVudi1bZW52aXJvbm1lbnRdYCBmaWxlLgpgYGAKUkNfVVNFUk5BTUU9ClJDX1BBU1NXT1JEPQpSQ19FWFRFTlNJT049CmBgYApJZiB5b3UgZG9uJ3Qga25vdyBob3cgdG8gY3JlYXRlIGEgUmluZ0NlbnRyYWwgYXBwLiBDbGljayBbaHR0cHM6Ly9kZXZlbG9wZXIucmluZ2NlbnRyYWwuY29tL2xpYnJhcnkvZ2V0dGluZy1zdGFydGVkLmh0bWxdKGhlcmUpIGZvciBpbnN0cnVjdGlvbnMuCgojIyMgUnVuIHRoZSBkZW1vClNldCBgRU5WSVJPTk1FTlQ9c2FuZGJveGAgaW4gdGhlIGAuZW52YCBmaWxlIHRvIHJ1biBpbiB0aGUgc2FuZGJveCBlbnZpcm9ubWVudC4KClNldCBgRU5WSVJPTk1FTlQ9cHJvZHVjdGlvbmAgaW4gdGhlIGAuZW52YCBmaWxlIHRvIHJ1biBpbiB0aGUgcHJvZHVjdGlvbiBlbnZpcm9ubWVudC4KCkF1dGhlbnRpY2F0ZSBhbmQgY2FsbCBSaW5nQ2VudHJhbCBBUElzIHVzaW5nIHRoZSBSaW5nQ2VudHJhbCBOb2RlIEpTIFNESy4KYGBgCiQgbm9kZSBkZW1vLmpzCmBgYAoKIyMjIFJpbmdDZW50cmFsIERldmVsb3BlciBQb3J0YWwKVG8gc2V0dXAgYSBmcmVlIGRldmVsb3BlciBhY2NvdW50LCBjbGljayBbaGVyZV0oaHR0cHM6Ly9kZXZlbG9wZXIvcmluZ2NlbnRyYWwuY29tKQoKIyMgUmluZ0NlbnRyYWwgTm9kZSBKUyBTREsKVGhlIFNESyBpcyBhdmFpbGFibGUgYXQgaHR0cHM6Ly9naXRodWIuY29tL3JpbmdjZW50cmFsL3JpbmdjZW50cmFsLWpzCg==</textarea>
<textarea class="saurus-file" data-file="../environment/dotenv-sandbox" data-mode="text">UkNfU0VSVkVSX1VSTD1odHRwczovL3BsYXRmb3JtLmRldnRlc3QucmluZ2NlbnRyYWwuY29tClJDX0NMSUVOVF9JRD0KUkNfQ0xJRU5UX1NFQ1JFVD0KUkNfVVNFUk5BTUU9ClJDX1BBU1NXT1JEPQpSQ19FWFRFTlNJT049ClJDX1JFRElSRUNUX1VSTD0K</textarea>
<textarea class="saurus-file" data-file="../rc_authenticate.js" data-mode="javascript">dmFyIFJDID0gcmVxdWlyZSgncmluZ2NlbnRyYWwnKQp2YXIgZnMgPSByZXF1aXJlKCdmcycpCgpyZXF1aXJlKCdkb3RlbnYnKS5sb2FkKCk7CnZhciB0b2tlbnNfZmlsZSA9ICJ0b2tlbnNfIgppZiAocHJvY2Vzcy5lbnYuRU5WSVJPTk1FTlQgPT0gInNhbmRib3giKSB7CiAgcmVxdWlyZSgnZG90ZW52JykuY29uZmlnKHtwYXRoOiAiLi9lbnZpcm9ubWVudC8uZW52LXNhbmRib3gifSk7CiAgdG9rZW5zX2ZpbGUgKz0gInNiLnR4dCIKfSBlbHNlIHsKICByZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoe3BhdGg6ICIuL2Vudmlyb25tZW50Ly5lbnYtcHJvZHVjdGlvbiJ9KTsKICB0b2tlbnNfZmlsZSArPSAicGQudHh0Igp9CgpmdW5jdGlvbiBSQ19BdXRoZW50aWNhdGlvbigpIHt9CmV4cG9ydHMuUkNfQXV0aGVudGljYXRpb24gPSBSQ19BdXRoZW50aWNhdGlvbgoKUkNfQXV0aGVudGljYXRpb24ucHJvdG90eXBlID0gewogICAgZ2V0X3NkazogZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIHJjc2RrID0gbmV3IFJDKHsKICAgICAgICAgIHNlcnZlcjpwcm9jZXNzLmVudi5SQ19TRVJWRVJfVVJMLAogICAgICAgICAgYXBwS2V5OiBwcm9jZXNzLmVudi5SQ19DTElFTlRfSUQsCiAgICAgICAgICBhcHBTZWNyZXQ6cHJvY2Vzcy5lbnYuUkNfQ0xJRU5UX1NFQ1JFVAogICAgICAgIH0pCiAgICAgICAgcmV0dXJuIHJjc2RrCiAgICB9LAogICAgZ2V0X3BsYXRmb3JtOiBmdW5jdGlvbihjYWxsYmFjayl7CiAgICAgICAgdmFyIHJjc2RrID0gdGhpcy5nZXRfc2RrKCkKICAgICAgICB2YXIgcGxhdGZvcm0gPSByY3Nkay5wbGF0Zm9ybSgpCiAgICAgICAgaWYgKGZzLmV4aXN0c1N5bmModG9rZW5zX2ZpbGUpKSB7CiAgICAgICAgICB2YXIgc2F2ZWRfdG9rZW5zID0gZnMucmVhZEZpbGVTeW5jKHRva2Vuc19maWxlLCAndXRmOCcpOwogICAgICAgICAgdmFyIHRva2Vuc09iaiA9IEpTT04ucGFyc2Uoc2F2ZWRfdG9rZW5zKQogICAgICAgICAgcGxhdGZvcm0uYXV0aCgpLnNldERhdGEodG9rZW5zT2JqKQogICAgICAgICAgaWYgKHBsYXRmb3JtLmxvZ2dlZEluKCkpewogICAgICAgICAgICBjb25zb2xlLmxvZygiYWxyZWFkeSBsb2dnZWQgaW4iKQogICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgcGxhdGZvcm0pCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGNvbnNvbGUubG9nKCJsb2dpbi9yZWxvZ2luIikKICAgICAgICBwbGF0Zm9ybS5sb2dpbih7CiAgICAgICAgICB1c2VybmFtZTpwcm9jZXNzLmVudi5SQ19VU0VSTkFNRSwKICAgICAgICAgIHBhc3N3b3JkOnByb2Nlc3MuZW52LlJDX1BBU1NXT1JECiAgICAgICAgfSkKICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwKXsKICAgICAgICAgIGZzLndyaXRlRmlsZSh0b2tlbnNfZmlsZSwgSlNPTi5zdHJpbmdpZnkocGxhdGZvcm0uYXV0aCgpLmRhdGEoKSksIGZ1bmN0aW9uKGVycikgewogICAgICAgICAgICAgIGlmKGVycikKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICAgIH0pCiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgcGxhdGZvcm0pCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZSl7CiAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZSwgbnVsbCkKICAgICAgICB9KQogICAgfQp9Cg==</textarea>
<textarea class="saurus-file" data-file="../demo.js" data-mode="javascript">Y29uc3QgcmNfYXV0aCA9IHJlcXVpcmUoJy4vcmNfYXV0aGVudGljYXRlLmpzJykKCmZ1bmN0aW9uIHJlYWRfYWNjb3VudF9leHRlbnNpb25zKCl7CiAgICB2YXIgYXV0aCA9IG5ldyByY19hdXRoLlJDX0F1dGhlbnRpY2F0aW9uKCkKICAgIGF1dGguZ2V0X3BsYXRmb3JtKGZ1bmN0aW9uKGVyciwgcGxhdGZvcm0pewogICAgICAgIGlmIChlcnIpewogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpCiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIHZhciBlbmRwb2ludCA9ICIvcmVzdGFwaS92MS4wL2FjY291bnQvfi9leHRlbnNpb24iOwogICAgICAgICAgICBwbGF0Zm9ybS5nZXQoZW5kcG9pbnQsIHt9KQogICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwKXsKICAgICAgICAgICAgICAgIHZhciBqc29uT2JqID0gcmVzcC5qc29uKCkKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGpzb25PYmopCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpCiAgICAgICAgICAgIH0pCiAgICAgICAgfQogICAgfSkKfQoKcmVhZF9hY2NvdW50X2V4dGVuc2lvbnMoKQo=</textarea>
</div>
</div><div class="saurus-overview"><ul></ul></div></div><div class="saurus-code"><div class="file-path"><span class="crumb-container"></span><i class="fa fa-fw fa-folder"></i></div><div class="saurus-editor"></div></div><div class="saurus-explorer"><div class="saurus-file-list"></div><div class="saurus-file-actions"><a href="https://github.com/https://github.com/ringcentral-tutorials/password-flow-authentication-nodejs-demo" target="_blank" class="explorer-get-code"><i class="fa fa-lg fa-github-square"></i>View Code on GitHub</a><a href="https://github.com/https://github.com/ringcentral-tutorials/password-flow-authentication-nodejs-demo/archive/master.zip" target="_blank" class="explorer-get-code"><i class="fa fa-lg icon-download"></i>Download Source Code</a></div></div></div></div><footer><div class="footer-content"><div class="footer-content-row layout-2-cols"><div class="footer-content-row-left"><div class="footer-logo"><a href="http://www.ringcentral.com"><span>Back to the main site</span></a></div></div><div class="footer-content-row-right"><ul class="footer-text-links"><li><a href="http://www.ringcentral.com/legal.html" target="_blank"><span>Legal</span></a></li><li><a href="http://www.ringcentral.com/security-statement.html" target="_blank"><span>Security Policy</span></a></li><li><a href="http://www.ringcentral.com/legal/privacy-policy.html" target="_blank"><span>Privacy Policy</span></a></li><li><a ng-href="https://devcommunity.ringcentral.com" target="_blank" href="https://devcommunity.ringcentral.com"><span>Community</span></a></li><li><a href="https://medium.com/ringcentral-developers" target="_blank"><span>Blog</span></a></li></ul></div></div><div class="footer-content-row footer-content-row-last layout-2-cols"><div class="footer-content-row-left"><span class="footer-copyright">Â© 1999-<span ng-bind="::main.nowObj|date:'yyyy'" class="footer-copyright-to ng-binding">2017</span> RingCentral, Inc. All rights reserved.</span></div><div class="footer-content-row-right"><div class="footer-image-links"><div class="footer-image-link footer-image-link-facebook"><a target="_blank" href="http://www.facebook.com/ringcentral"><i class="fa icon-facebook"></i></a></div><div class="footer-image-link footer-image-link-twitter"><a target="_blank" href="http://twitter.com/ringcentraldevs"><i class="fa icon-twitter"></i></a></div><div class="footer-image-link footer-image-link-google-plus"><a target="_blank" href="https://www.google.com/+ringcentral"><i class="fa icon-google_plus"></i></a></div><div class="footer-image-link footer-image-link-linkedin"><a target="_blank" href="http://www.linkedin.com/company/ringcentral"><i class="fa icon-linkedin"></i></a></div><div class="footer-image-link footer-image-link-youtube"><a target="_blank" href="http://www.youtube.com/ringcentral"><i class="fa icon-youtube"></i></a></div></div></div></div></div></footer></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script><script src="ace/ace.js"></script><script src="ace/theme-monokai.js"></script><script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script><script>window.tutorialName="RingCentral Platform Authentication - Password Flow OAuth";</script><script src="viewsaurus.js"></script></body></html>